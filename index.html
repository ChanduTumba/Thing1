<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unlock to Proceed</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
      overflow: hidden; /* Hide scrollbars if content exceeds viewport */
    }

    #unlock-screen {
      text-align: center;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: opacity 0.5s ease-out;
      opacity: 1;
      visibility: visible;
      position: relative; /* Ensure it's positioned for its children */
      z-index: 10; /* Ensure it's above the main content initially */
    }

    #rickroll-content {
      text-align: center;
      padding-top: 50px;
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
      display: none; /* Hidden by default */
      opacity: 0;
      transition: opacity 0.5s ease-in;
      position: absolute; /* Position absolutely to fade in over previous content */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      box-sizing: border-box; /* Include padding in element's total width and height */
    }

    .slider-container {
      width: 250px;
      height: 50px;
      background-color: #ddd;
      border-radius: 25px;
      position: relative;
      overflow: hidden;
      margin-top: 30px;
      cursor: grab;
      user-select: none; /* Prevents text selection during drag */
      touch-action: pan-y; /* Allows vertical scrolling on touch devices while sliding horizontally */
    }

    .slider-text {
      position: absolute;
      width: 100%;
      height: 100%;
      line-height: 50px;
      text-align: center;
      color: #666;
      font-size: 18px;
      z-index: 1;
      pointer-events: none; /* Allows clicks/drags to pass through to the handle */
    }

    .slider-fill {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0; /* Starts at 0 width */
      background-color: #4CAF50;
      border-radius: 25px;
      transition: width 0.1s linear; /* Smooth fill */
    }

    .slider-handle {
      width: 50px;
      height: 50px;
      background-color: #4CAF50;
      border-radius: 50%;
      position: absolute;
      left: 0; /* Start at the left edge */
      top: 0;
      cursor: grab;
      transition: background-color 0.2s ease;
      z-index: 2;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Add a subtle shadow */
      display: flex; /* For centering content inside if needed */
      justify-content: center;
      align-items: center;
    }

    .slider-handle:active {
      cursor: grabbing;
      background-color: #45a049;
    }
  </style>
</head>
<body>

  <div id="unlock-screen">
    <h2>Slide to Unlock!</h2>
    <div class="slider-container" id="sliderContainer">
      <div class="slider-fill" id="sliderFill"></div>
      <div class="slider-text" id="sliderText">Slide to Unlock</div>
      <div class="slider-handle" id="sliderHandle"></div>
    </div>
  </div>

  <div id="rickroll-content">
    <h1>Oops! This isnâ€™t a clue. Youâ€™ve just been Rickrolled!</h1>
    <p style="font-size: 18px;">Enjoy this unexpected twist! ðŸ˜‰</p>

    <img src="rick-roll-rick-ashley.gif" alt="Rickroll GIF" width="300" style="border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">

    <audio id="rickrollAudio" preload="auto">
      <source src="https://www.myinstants.com/media/sounds/rick-roll.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>

  <script>
    const sliderContainer = document.getElementById('sliderContainer');
    const sliderHandle = document.getElementById('sliderHandle');
    const sliderFill = document.getElementById('sliderFill');
    const sliderText = document.getElementById('sliderText');
    const unlockScreen = document.getElementById('unlock-screen');
    const rickrollContent = document.getElementById('rickroll-content');
    const rickrollAudio = document.getElementById('rickrollAudio');

    let isDragging = false;
    let initialX; // Stores the initial clientX on mousedown/touchstart
    let handleInitialLeft; // Stores the initial 'left' style of the handle

    // Percentage of the slider width to trigger unlock
    const unlockThreshold = 0.9;

    // --- Mouse Events ---
    sliderHandle.addEventListener('mousedown', (e) => {
      isDragging = true;
      initialX = e.clientX;
      // Get the current left position relative to its parent container
      handleInitialLeft = sliderHandle.offsetLeft;
      sliderHandle.style.transition = 'none'; // Disable transition during drag
      sliderFill.style.transition = 'none';
      sliderContainer.style.cursor = 'grabbing';
      e.preventDefault(); // Prevent text selection on drag
    });

    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;

      const deltaX = e.clientX - initialX;
      let newLeft = handleInitialLeft + deltaX;

      // Clamp newLeft within the slider bounds
      const maxLeft = sliderContainer.offsetWidth - sliderHandle.offsetWidth;
      newLeft = Math.max(0, Math.min(newLeft, maxLeft));

      sliderHandle.style.left = ${newLeft}px;
      sliderFill.style.width = ${newLeft + sliderHandle.offsetWidth / 2}px;

      const currentPosition = newLeft + sliderHandle.offsetWidth / 2;
      const unlockWidth = sliderContainer.offsetWidth * unlockThreshold;

      if (currentPosition >= unlockWidth) {
        sliderText.textContent = "Release to Unlock!";
      } else {
        sliderText.textContent = "Slide to Unlock";
      }
    });

    document.addEventListener('mouseup', () => {
      if (!isDragging) return;
      isDragging = false;

      const currentHandlePosition = parseFloat(sliderHandle.style.left) + sliderHandle.offsetWidth / 2;
      const unlockWidth = sliderContainer.offsetWidth * unlockThreshold;

      if (currentHandlePosition >= unlockWidth) {
        // Unlocked!
        unlockScreen.style.opacity = '0';
        unlockScreen.style.visibility = 'hidden';
        setTimeout(() => {
          unlockScreen.style.display = 'none';
          rickrollContent.style.display = 'block'; // Make it visible
          setTimeout(() => {
            rickrollContent.style.opacity = '1'; // Fade it in
            // Attempt to play audio
            rickrollAudio.play().catch(error => {
              console.warn("Autoplay was prevented:", error);
              // You could add a visible "Play Sound" button here if autoplay fails
            });
          }, 50); // Small delay for fade-in effect
        }, 500); // Wait for unlock screen to fade out
      } else {
        // Reset slider if not fully slid
        sliderHandle.style.transition = 'left 0.3s ease';
        sliderFill.style.transition = 'width 0.3s ease';
        sliderHandle.style.left = '0px';
        sliderFill.style.width = '0px';
        sliderText.textContent = "Slide to Unlock";
      }
      sliderContainer.style.cursor = 'grab';
    });

    // --- Touch Events ---
    sliderHandle.addEventListener('touchstart', (e) => {
      isDragging = true;
      initialX = e.touches[0].clientX;
      handleInitialLeft = sliderHandle.offsetLeft;
      sliderHandle.style.transition = 'none';
      sliderFill.style.transition = 'none';
      sliderContainer.style.cursor = 'grabbing';
      e.preventDefault(); // Prevent scrolling while dragging
    }, { passive: false });

    document.addEventListener('touchmove', (e) => {
      if (!isDragging) return;

      const deltaX = e.touches[0].clientX - initialX;
      let newLeft = handleInitialLeft + deltaX;

      const maxLeft = sliderContainer.offsetWidth - sliderHandle.offsetWidth;
      newLeft = Math.max(0, Math.min(newLeft, maxLeft));

      sliderHandle.style.left = ${newLeft}px;
      sliderFill.style.width = ${newLeft + sliderHandle.offsetWidth / 2}px;

      const currentPosition = newLeft + sliderHandle.offsetWidth / 2;
      const unlockWidth = sliderContainer.offsetWidth * unlockThreshold;

      if (currentPosition >= unlockWidth) {
        sliderText.textContent = "Release to Unlock!";
      } else {
        sliderText.textContent = "Slide to Unlock";
      }
      e.preventDefault(); // Prevent scrolling while dragging
    }, { passive: false });

    document.addEventListener('touchend', () => {
      if (!isDragging) return;
      isDragging = false;

      const currentHandlePosition = parseFloat(sliderHandle.style.left) + sliderHandle.offsetWidth / 2;
      const unlockWidth = sliderContainer.offsetWidth * unlockThreshold;

      if (currentHandlePosition >= unlockWidth) {
        // Unlocked!
        unlockScreen.style.opacity = '0';
        unlockScreen.style.visibility = 'hidden';
        setTimeout(() => {
          unlockScreen.style.display = 'none';
          rickrollContent.style.display = 'block';
          setTimeout(() => {
            rickrollContent.style.opacity = '1';
            rickrollAudio.play().catch(error => {
              console.warn("Autoplay was prevented:", error);
            });
          }, 50);
        }, 500);
      } else {
        // Reset slider if not fully slid
        sliderHandle.style.transition = 'left 0.3s ease';
        sliderFill.style.transition = 'width 0.3s ease';
        sliderHandle.style.left = '0px';
        sliderFill.style.width = '0px';
        sliderText.textContent = "Slide to Unlock";
      }
      sliderContainer.style.cursor = 'grab';
    });
  </script>
</body>
</html>
